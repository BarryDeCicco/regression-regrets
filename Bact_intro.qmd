# Bacteremia study  {#Bacteremia}

```{r intro01, warning=FALSE, message=FALSE}
## Load libraries for this chapter
library(readr)
library(dplyr)
library(gt)
library(janitor)
library(here)
```


## Bacteremia study overview 

We will exemplify our proposed systematic approach to data screening by means of a diagnostic study with the primary aim of using age, sex and 49 laboratory variables to fit a diagnostic prediction model for the bacteremia status (= presence of bacteria in the blood stream) of a blood sample. A secondary aim of the study is to describe the functional form of each predictor in the model. Between January 2006 and December 2010, patients with the clinical suspicion to suffer from bacteremia were included if blood culture analysis was requested by the responsible physician and blood was sampled for assessment of hematology and biochemistry. An analysis of this study can be found in @Ratzinger2014.

The data consists of 14,691 observations from different patients and 51 potential predictors. To protect data privacy our version of this data was slightly modified compared to the original version, and this modified version was cleared by the Medical University of Vienna for public use (**DC 2019-0054**). Compared to the official results given in [@Ratzinger2014], our results may differ to a negligible degree. 


## Source dataset

### Where to access the data?

We refer to the **source** data as the raw data set available in this repository (**DC 2019-0054**). The data set is published on [Zenodo](https://doi.org/10.5281/zenodo.7554815) with the following doi: https://doi.org/10.5281/zenodo.7554815. 

For simplicity, we have also stored the *source* data and accompanying materials such as the **data dictionary** the `data-raw` directory. 

### Data dictionary

The data dictionary provides an overview of the collected data. First, we read and display the data dictionary below providing an overview of the collected measurements. The `variable` name and `label` are displayed alongside the measurement `scale` and `units` as well as `remarks` and relevant study information `from_paper`. 

```{r datadict, warning=FALSE, message=FALSE, echo=FALSE}

## Read in the source data dictionary, 
## clean column names to be consistent format 
## and arrange by variable order.  

bact_dd <- read_csv(
  here("data-raw", "Bacteremia_public_S2_Data_Dictionary.csv")
  ) |>
  arrange(VariableNr) |>
  clean_names()
```

```{r datadict_display}

## display the dictionary. 

bact_dd |> 
  select(-variable_nr) |>
  gt()

```

### Source data

We also display a short snapshot of source data set from the `data-raw` folder of the project directory. The snapshot provides a glimpse of the data, giving the data dictionary more context.  

```{r contents_bact,  warning=FALSE, message=FALSE, echo=FALSE} 

## Load the source dataset from the data folder. 
bact <- read_csv(
  here("data-raw", "Bacteremia_public_S2.csv")
  ) 

```

We do not display all observations measured as it is too wide and long to fit reasonably in to the report. However, we refer you to the [Zenodo page](https://doi.org/10.5281/zenodo.7554815) for an interactive overview of the source data. 

```{r contents_bact_glimpse,  warning=FALSE, message=FALSE, echo=FALSE}
# TODO:: Move to appendix?
bact |> glimpse(width = getOption("width"))
```



## References 
